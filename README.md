# 🗺️ GeoJSON地図ビューアー

Open Street MapとLeafletを使用したインタラクティブなGeoJSONファイルビューアーです。GeoJSONファイルをドラッグ＆ドロップするだけで、地図上に簡単に重畳表示できます。

## 📋 目次

- [機能](#機能)
- [使用方法](#使用方法)
- [対応ファイル形式](#対応ファイル形式)
- [技術仕様](#技術仕様)
- [セットアップ](#セットアップ)
- [使用例](#使用例)
- [カスタマイズ](#カスタマイズ)
- [トラブルシューティング](#トラブルシューティング)
- [ライセンス](#ライセンス)

## ✨ 機能

### 🎯 主要機能
- **ドラッグ＆ドロップ対応**: GeoJSONファイルを地図上に簡単に読み込み
- **複数レイヤー管理**: 複数のGeoJSONファイルを同時に表示・管理
- **レイヤー制御**: 個別のレイヤーの表示/非表示切り替え
- **自動スタイリング**: レイヤーごとに自動的に異なる色を適用
- **インタラクティブポップアップ**: フィーチャーをクリックして詳細情報を表示

### 🎨 デザイン機能
- **レスポンシブデザイン**: デスクトップ・モバイル対応
- **モダンUI**: 直感的で使いやすいインターフェース
- **リアルタイムフィードバック**: ドラッグオーバー時の視覚的フィードバック

### 🔧 管理機能
- **レイヤー削除**: 不要なレイヤーを簡単に削除
- **フィーチャー数表示**: 各レイヤーのデータ数を表示
- **自動ズーム**: 読み込んだデータに合わせて地図を調整

## 🚀 使用方法

### 基本的な使い方

1. **ファイルの読み込み**
   - ドロップエリアにGeoJSONファイルをドラッグ＆ドロップ
   - または、ドロップエリアをクリックしてファイル選択ダイアログを開く
   - 地図上に直接ファイルをドロップすることも可能

2. **レイヤー管理**
   - 読み込まれたレイヤーは右側のサイドバーに表示
   - 「表示/非表示」ボタンでレイヤーの表示切り替え
   - 「削除」ボタンで不要なレイヤーを削除

3. **地図操作**
   - マウスホイール：拡大縮小
   - ドラッグ：地図の移動
   - フィーチャークリック：詳細情報をポップアップ表示

### 詳細操作

#### ファイルの読み込み方法
- **方法1**: ドロップエリアにファイルをドラッグ＆ドロップ
- **方法2**: ドロップエリアをクリックしてファイル選択
- **方法3**: 地図上に直接ファイルをドロップ
- **複数ファイル**: 一度に複数のGeoJSONファイルを選択・読み込み可能

#### レイヤー操作
- **表示切り替え**: レイヤーリストの「表示/非表示」ボタン
- **レイヤー削除**: レイヤーリストの「削除」ボタン
- **自動色分け**: 読み込み時に自動的に異なる色が割り当てられる

## 📁 対応ファイル形式

- **.geojson**: 標準的なGeoJSONファイル
- **.json**: JSON形式のGeoJSONファイル

### サポートするGeoJSONフィーチャータイプ
- **Point**: ポイントデータ（マーカー表示）
- **LineString**: ライン/ルートデータ
- **Polygon**: ポリゴン/エリアデータ
- **MultiPoint**: 複数ポイントデータ
- **MultiLineString**: 複数ラインデータ
- **MultiPolygon**: 複数ポリゴンデータ
- **GeometryCollection**: ジオメトリコレクション

## 🛠️ 技術仕様

### 使用ライブラリ
- **[Leaflet.js](https://leafletjs.com/)** v1.9.4: インタラクティブ地図ライブラリ
- **[OpenStreetMap](https://www.openstreetmap.org/)**: ベースマップタイル

### ブラウザ対応
- Chrome（推奨）
- Firefox
- Safari
- Edge

### 必要環境
- モダンブラウザ（ES6対応）
- インターネット接続（地図タイル読み込み用）

## ⚡ セットアップ

### 簡単セットアップ
1. リポジトリをクローンまたはダウンロード
2. `index.html`をブラウザで開く
3. すぐに使用開始！

### Webサーバーでの実行（推奨）
```bash
# Python3の場合
python -m http.server 8000

# Python2の場合
python -m SimpleHTTPServer 8000

# Node.jsのserveを使用
npx serve .
```

ブラウザで `http://localhost:8000` にアクセス

## 💡 使用例

### サンプルGeoJSONデータ

#### ポイントデータ例
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [139.7671, 35.6812]
      },
      "properties": {
        "name": "東京駅",
        "category": "交通",
        "description": "日本の鉄道の中心駅"
      }
    }
  ]
}
```

#### ポリゴンデータ例
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [139.7500, 35.6700],
          [139.7800, 35.6700],
          [139.7800, 35.6900],
          [139.7500, 35.6900],
          [139.7500, 35.6700]
        ]]
      },
      "properties": {
        "name": "中央区エリア",
        "area": "商業地域",
        "population": "約16万人"
      }
    }
  ]
}
```

## 🎨 カスタマイズ

### スタイルの変更
地図のスタイルをカスタマイズしたい場合は、`index.html`内のCSSセクションを編集してください。

### 色の変更
レイヤーの色を変更するには、JavaScriptの`getRandomColor()`関数を編集してください：

```javascript
function getRandomColor() {
    const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'];
    return colors[Math.floor(Math.random() * colors.length)];
}
```

### 地図タイルの変更
OpenStreetMap以外のタイルを使用したい場合：

```javascript
L.tileLayer('https://your-tile-server/{z}/{x}/{y}.png', {
    attribution: '© Your Attribution',
    maxZoom: 19
}).addTo(map);
```

## 🐛 トラブルシューティング

### よくある問題と解決方法

#### ファイルが読み込まれない
- **原因**: 無効なGeoJSON形式
- **解決**: GeoJSONの構文を確認（[GeoJSON.io](http://geojson.io/)で検証推奨）

#### 地図が表示されない
- **原因**: インターネット接続の問題
- **解決**: ネットワーク接続を確認

#### レイヤーが表示されない
- **原因**: 座標系の問題（WGS84以外）
- **解決**: 座標をWGS84（EPSG:4326）に変換

#### パフォーマンスが低下する
- **原因**: 大量のフィーチャーを含むファイル
- **解決**: データを分割するか、間引き処理を実装

### デバッグモード
ブラウザの開発者ツールコンソールで詳細なログを確認できます：
- ファイル読み込み状況
- エラーメッセージ
- 座標クリック情報

## 📄 ライセンス

MIT License

このプロジェクトはMITライセンスの下で公開されています。詳細は[LICENSE](LICENSE)ファイルをご覧ください。

## 📞 サポート

質問や問題がある場合は、GitHubのIssuesタブからお気軽にお問い合わせください。

---

**Happy Mapping! 🗺️✨** 